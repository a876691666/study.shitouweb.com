<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<script src="/lib/vue/vue.2.5.8.js"></script>
	<link rel="stylesheet" type="text/css" href="/css/base.css">
	<link rel="stylesheet" type="text/css" href="/css/main.css">
	<link rel="icon" href="/favicon.ico" />
	<title>{{title}}</title>
</head>
<body class="docs">
	<div id="header">
		<ul id="nav">
			<li>
				<form id="search-form">
					<span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
						<input type="text" id="search-query-nav" class="search-query st-default-search-input aa-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;">
						<pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Arial; font-size: 13.3333px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre>
						<span class="aa-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; left: 0px; right: auto; display: none;">
							<div class="aa-dataset-1"></div>
						</span>
					</span>
				</form>
			</li>
			<li>
				<a class="nav-link" href="">主页</a>
			</li>
			<li class="nav-dropdown-container">
				<a class="nav-link">代码库</a>
				<span class="arrow"></span>
				<ul class="nav-dropdown">
					<li>
						<h4>游戏</h4>
					</li>
					<li>
						<ul>
							<li>
								<a href="" class="nav-link" target="_blank">论坛</a>
							</li>
						</ul>
					</li>
					<li>
						<h4>工具</h4>
					</li>
					<li>
						<ul>
							<li>
								<a href="" class="nav-link" target="_blank">Devtools</a>
							</li>
						</ul>
					</li>
					<li>
						<h4>UI组件</h4>
					</li>
					<li>
						<ul>
							<li>
								<a href="" class="nav-link" target="_blank">Vue Router</a>
							</li>
						</ul>
					</li>
					<li>
						<h4>非UI组件</h4>
					</li>
					<li>
						<ul>
							<li>
								<a href="" class="nav-link" target="_blank">Roadmap</a>
							</li>
						</ul>
					</li>
					<li>
						<h4>资源列表</h4>
					</li>
					<li>
						<ul>
							<li>
								<a href="" class="nav-link" target="_blank">官方仓库</a>
							</li>
						</ul>
					</li>
				</ul>
			</li>
		</ul>
	</div>
	<div class="background blur">

	</div>
	<div id='main' :style="style">
		<div class="sidebar"></div>
		<div class="content clearfix">
			<div v-for="c in cardList" class="card-box">
				<hover3d class="card">
					<div class="card-mask" @click="goPage(c.url)">
					</div>
					<div class="card-content">
						<h1 class="card-title">{{c.title}}</h1>
					</div>
					<div class="card-background" :style="{background:c.image ? 'url('+c.image+')' : '', backgroundSize:'cover'}"> </div>
					<div class="card-background blur2" :style="{background:c.image ? 'url('+c.image+')' : '', backgroundSize:'cover'}"> </div>
				</hover3d>
			</div>
		</div>
	</div>
</body>
<script>
	Vue.component('hover3d', {
		template:`
				<div :style="boxStyle" @mouseover.capture="onmouseover" @mousemove.capture="onmousemove" @mouseout.capture="onmouseout">
					<div :style="translateZ">
						<slot>

						</slot>
						<div :style="backgroundStyle" class="border-radius20">
						</div>
						<div :style="shadow" class="border-radius20">
						</div>
					</div>
				</div>
		`,
		data:function () {
			return {
				boxStyle:{
					transform: 'rotateX(0deg) rotateY(0deg) scale(1)'
				},
				backgroundStyle:{
					width:'100%',
					height:'100%',
					background:'',
					position:'relative',
					zIndex:6
				},
				shadow:{
					width:'100%',
					height:'100%',
					background:'',
					position:'absolute',
					top:0,
					transition:'all .4s cubic-bezier(0, 0, 0.61, 3)',
					backgroundColor:'#aaa',
					boxShadow:'0 0 20px -5px #000',
					zIndex:1
				},
				translateZ:{
					width:'100%',
					height:'100%',
					transition:'transform .4s cubic-bezier(0, 0, 0.61, 3)',
					transform:''
				}
			};
		},
		methods:{
			onmouseover:function (event) {
				this.boxStyle.transform = 'rotateX(0deg) rotateY(0deg) scale(1.2)'
				this.shadow.boxShadow = '0 0 40px -5px #000'
				this.shadow.backgroundColor = '#bbb'
			},
			onmousemove:function (event) {
				var x = event.offsetX;
				var y = event.offsetY;
				var el = this.$el;
				var ex = el.clientWidth /2
				var ey = el.clientHeight /2
				console.log(el.localName)
				var sjxy = {
					x: x- ex,
					y: y- ey
				};
				var C = Math.sqrt(Math.pow(sjxy.x, 2) + Math.pow(sjxy.y, 2));
				var angle = (180 * Math.asin(sjxy.x / C) / Math.PI);
				if(sjxy.y<0){
					angle = 180-angle
				};

				var rx = -(y-ey)/ey*10;
				var ry = (x-ex)/ex*10;
				this.boxStyle.transform = 'rotateX('+rx+'deg) rotateY('+ry+'deg) scale(1)'
				this.translateZ.transform = 'translateZ(100px)'
				this.boxStyle.zIndex = 10;
				this.boxStyle.position = 'relative';
				this.backgroundStyle.background = 'linear-gradient('+-angle+'deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0) 60%)'

			},
			onmouseout:function (event) {
				this.boxStyle.transform = 'rotateX(0deg) rotateY(0deg) scale(1)'
				this.translateZ.transform = ''
				this.backgroundStyle.background = ''
				this.boxStyle.zIndex = '';
				this.boxStyle.position = '';
				this.shadow.boxShadow = '0 0 20px -5px #000'
				this.shadow.backgroundColor = '#aaa'

				this.boxStyle.boxShadow = ''
			}
		}
	})
	var title = new Vue({
		el:'title',
		data:{
			title:'石头web'
		}
	})
	var header = new Vue({
		el:'#header'
	})
	var app = new Vue({
		el:"#main",
		data:{
			style:{
			},
			msg:'石头WEB',
			cardList:[{
				title:'贪吃蛇',
				image:'/images/background1.jpg',
				url:'/code/a/'
			},{
				title:'这是一个标题'
			},{
				title:'这是一个标题'
			},{
				title:'这是一个标题'
			},{
				title:'这是一个标题'
			},{
				title:'这是一个标题'
			},{
				title:'这是一个标题'
			}]
		},
		methods:{
			goPage:function(url) {
				if(!url) return;
				window.location.href = window.location.origin + url;
			}
		}
	})
</script>
</html>
